"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[503],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return h}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=c(n),h=r,g=d["".concat(l,".").concat(h)]||d[h]||u[h]||o;return n?a.createElement(g,i(i({ref:t},p),{},{components:n})):a.createElement(g,i({ref:t},p))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var c=2;c<o;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},3551:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return l},default:function(){return h},frontMatter:function(){return s},metadata:function(){return c},toc:function(){return u}});var a=n(7462),r=n(3366),o=(n(7294),n(3905)),i=["components"],s={sidebar_position:3},l="Configuration",c={unversionedId:"Fyreactyl/Configuration",id:"Fyreactyl/Configuration",title:"Configuration",description:"This page goes over the settings.yml configuration and setting up the Nginx webserver for Fyreactyl.",source:"@site/docs/Fyreactyl/Configuration.md",sourceDirName:"Fyreactyl",slug:"/Fyreactyl/Configuration",permalink:"/docs/Fyreactyl/Configuration",editUrl:"https://github.com/FyreHub/Fyreactyl/docs/Fyreactyl/Configuration.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Installation",permalink:"/docs/Fyreactyl/Install"},next:{title:"Congrats",permalink:"/docs/Fyreactyl/Congratulations"}},p={},u=[{value:"Configuring your Settings",id:"configuring-your-settings",level:2},{value:"Discord Auth",id:"discord-auth",level:3},{value:"Pterodactyl config",id:"pterodactyl-config",level:3},{value:"Database",id:"database",level:3},{value:"API EndPoints",id:"api-endpoints",level:3},{value:"Locations",id:"locations",level:3},{value:"Eggs",id:"eggs",level:3},{value:"Plans",id:"plans",level:3},{value:"Store",id:"store",level:3},{value:"AFK4Coins",id:"afk4coins",level:3},{value:"Set Up Nginx",id:"set-up-nginx",level:2}],d={toc:u};function h(e){var t=e.components,n=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"configuration"},"Configuration"),(0,o.kt)("p",null,"This page goes over the ",(0,o.kt)("inlineCode",{parentName:"p"},"settings.yml")," configuration and setting up the Nginx webserver for Fyreactyl."),(0,o.kt)("h2",{id:"configuring-your-settings"},"Configuring your Settings"),(0,o.kt)("p",null,"Because the ",(0,o.kt)("inlineCode",{parentName:"p"},"settings.yml")," file is quit big , this page will break down and explain each individual section."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'website:\n  port: 8000\n  secret: "extremely secret very secret MAXIMUM secret LMAO."\n  secure: false # This option requires https.\n  url: "http://localhost:8000"\n')),(0,o.kt)("p",null,"The start of the settings file; The ",(0,o.kt)("inlineCode",{parentName:"p"},"port")," is where Fyreactyl will be running. Your Discord credentials can be found ",(0,o.kt)("a",{parentName:"p",href:"https://discord.com/developers/applications"},"at the developer portal")," with the application you are using for Fyreactyl. Make sure ypu change the ",(0,o.kt)("inlineCode",{parentName:"p"},"localhost:8000")," to your domain and keep http."),(0,o.kt)("h3",{id:"discord-auth"},"Discord Auth"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'discord:\n  id: ""\n  secret: ""\n  signup_callback: "http://localhost:8000/accounts/discord/signup/callback"\n  login_callback: "http://localhost:8000/accounts/discord/login/callback"\n  link_callback: "http://localhost:8000/accounts/discord/link/callback"\n  prompt: false\n\n  token: ""\n  guild: "000000000000000000" # Add your server ID you want to force users to join on login here.\n')),(0,o.kt)("p",null,"your Discord credentials can be found at the developer ",(0,o.kt)("a",{parentName:"p",href:"https://discord.com/developers/applications"},"portal")," with the application you are using for Fyreactyl. When setting up the ",(0,o.kt)("inlineCode",{parentName:"p"},"callbackpath"),", make sure it is also whitelisted in the portal: ",(0,o.kt)("strong",{parentName:"p"},"Your Application > Oauth2 > Redirects"),". The ",(0,o.kt)("inlineCode",{parentName:"p"},"token")," is the token of your bot application for Fyreactyl. This must be kept secret ",(0,o.kt)("strong",{parentName:"p"},"at all times")," as it can be easily abused. The ",(0,o.kt)("inlineCode",{parentName:"p"},"guild")," is your server ID if applicable."),(0,o.kt)("p",null,"Make sure you change ",(0,o.kt)("inlineCode",{parentName:"p"},"http://localhost:8000")," it to ",(0,o.kt)("inlineCode",{parentName:"p"},"https://youDomain.tld"),". Change ",(0,o.kt)("inlineCode",{parentName:"p"},"promt: false")," to ",(0,o.kt)("inlineCode",{parentName:"p"},"promt: false")," if you will be using discord auth as well as email and password."),(0,o.kt)("h3",{id:"pterodactyl-config"},"Pterodactyl config"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'pterodactyl:\n  domain: "" # The panel domain\n  key: "" # Make sure to higher/remove rate limits for application API keys, so the dashboard doesn\'t get rate limited.\n  generate_password_on_sign_up: true\n')),(0,o.kt)("p",null,"In the ",(0,o.kt)("inlineCode",{parentName:"p"},"domain")," part add you panel domain with https e.g. ",(0,o.kt)("inlineCode",{parentName:"p"},"https://panel.my.domain"),".\nGo ahead and go the the pteropanel settings and go to api and create an api key with ",(0,o.kt)("strong",{parentName:"p"},"read & write")," and paste it in to ",(0,o.kt)("inlineCode",{parentName:"p"},"key")),(0,o.kt)("h3",{id:"database"},"Database"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"mysql -u root -p\n\n# After you've got that setup, let's go into the next step. Remember to change 'YourPasswordHere' with a secure password.\nCREATE USER 'dashboard'@'127.0.0.1' IDENTIFIED BY 'YourPasswordHere';\nCREATE DATABASE dashactyl;\nGRANT ALL PRIVILEGES ON dashactyl.* TO 'dashboard'@'127.0.0.1' WITH GRANT OPTION;\nquit;\n")),(0,o.kt)("p",null,"Now"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'database:\n  host: "Enter your database IP here."\n  port: "Enter your database port here."\n  user: "Enter your database user here."\n  password: "Enter your database password here."\n  database: "dashactyl"\n')),(0,o.kt)("p",null,"Go ahead and fill in the detail. normally the ",(0,o.kt)("strong",{parentName:"p"},"port")," is 3306 if you make it on your vps. Make sure you check what port your provider tells you to use."),(0,o.kt)("h3",{id:"api-endpoints"},"API EndPoints"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'api: # The client area might break if there are no API codes, so I highly recommend adding a single secure API code.\n  apicodepassword: # This would be the "Bearer apicodepassword".\n    user info: true\n    blacklist user: true\n    unblacklist user: true\n    set coins: true\n    set package: true\n    set resources: true\n    create coupon: true\n    revoke coupon: true\n    change name: true\n')),(0,o.kt)("p",null,"This section is for managing the Freactyl API endpoints. Each option toggles whether the endpoint can be used publicly."),(0,o.kt)("h3",{id:"locations"},"Locations"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'locations:\n  "1": # Location ID.\n    name: "Africa" # Location display name.\n    enabled: true # Enable or disable server creation on this location.\n    package: null # Required package to make a server on this location.\n\n    # package:\n    # - default\n    # - another_package_name\n\n    renewal: false # Enables renewals for this feature. (Do not toggle after setting up this node on the client area. It might break things.)\n')),(0,o.kt)("p",null,"Here you can add your nodes. Make sure you add the nodes you need for location ID check if it matched the on pteropanel.\n",(0,o.kt)("inlineCode",{parentName:"p"},"package")," checks if a user has a package on his account. If the user doesn't have the specified package in Freactyl, the user won't be able to create the server in that location."),(0,o.kt)("h3",{id:"eggs"},"Eggs"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'eggs: # These are the eggs servers can be created with.\n  paper:\n    display: "Paper"\n    minimum:\n      memory: 100\n      disk: 100\n      cpu: 10\n    maximum:\n      memory: null\n      disk: null\n      cpu: null\n    info:\n      egg: 3\n      docker_image: quay.io/pterodactyl/core:java\n      startup: java -Xms128M -Xmx{{SERVER_MEMORY}}M -Dterminal.jline=false -Dterminal.ansi=true -jar {{SERVER_JARFILE}}\n      environment:\n        SERVER_JARFILE: "server.jar"\n        BUILD_NUMBER: "latest"\n      feature_limits:\n        databases: 1\n        backups: 1\n')),(0,o.kt)("p",null,"This section is for the server configuration eggs in Pterodactyl. When creating a server through Freactyl, the package associated with this egg will be used to create it. You can set this to your liking, and/or remove the default egg to change it with another one.\nAdd as many as you need but make sure you chnage the ",(0,o.kt)("inlineCode",{parentName:"p"},"egg")," ",(0,o.kt)("strong",{parentName:"p"},"ID")),(0,o.kt)("h3",{id:"plans"},"Plans"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'packages: # These are packages. They are organized categories on how much resources you would give to anyone with this package.\n  default: "default"\n  list:\n    default:\n      display: "The package name."\n      memory: 1024\n      disk: 1024\n      cpu: 100\n      servers: 1\n    pro:\n      id: "pro"\n      display: "Pro Package"\n      memory: 2048\n      disk: 2048\n      cpu: 200\n      servers: 2\n      price: 20000\n      paid: true\n')),(0,o.kt)("p",null,"Here you can add different packages users can purchase plans with coins."),(0,o.kt)("h3",{id:"store"},"Store"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"store: # This is the store options.\n  # 'enabled' is an option, which toggles if you can buy a single type of resource of.\n  # 'cost' is the amount of coins 'per' of a resource would cost.\n\n  memory:\n    enabled: true\n    cost: 10\n    per: 10\n\n  disk:\n    enabled: true\n    cost: 10\n    per: 10\n\n  cpu:\n    enabled: true\n    cost: 10\n    per: 10\n\n  servers:\n    enabled: true\n    cost: 10\n    per: 10\n\n  packages:\n    enabled: true\n")),(0,o.kt)("p",null,"This is too easy to configure so you can do that."),(0,o.kt)("h3",{id:"afk4coins"},"AFK4Coins"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'afk:\n  domain_lock:\n    - localhost:8000 # Change this to your actual domain.\n  redirect_on_attempt_to_steal_code: https://www.youtube.com/watch?v=dQw4w9WgXcQ\n  arc_id: ""\n  google_ads_pub_key: ""\n  everywhat: 60 # seconds\n  gaincoins: 1 # coins\n\nrenewal:\n  renewal_time: 6.048e+8\n  deletion_time: 8.64e+7\n\n  renew_fee: 10 # coins\n')),(0,o.kt)("p",null,"Here you will setup afk and server renewal."),(0,o.kt)("p",null,"Change ",(0,o.kt)("inlineCode",{parentName:"p"},"localhost:8000")," to you domain. Also if needed to change ",(0,o.kt)("inlineCode",{parentName:"p"},"renew_fee")," and the rest of that."),(0,o.kt)("h2",{id:"set-up-nginx"},"Set Up Nginx"),(0,o.kt)("p",null,"This is the most ",(0,o.kt)("strong",{parentName:"p"},"important")," part so ",(0,o.kt)("strong",{parentName:"p"},"concentrate"),".\nHere you will install ",(0,o.kt)("strong",{parentName:"p"},"nginx, certbot, and python3-certbot-nginx")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"sudo apt install nginx\nsudo apt install certbot\nsudo apt install -y python3-certbot-nginx\n")),(0,o.kt)("p",null,"Now to install letencrypt SSL for you domain"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"systemctl start nginx\ncertbot certonly --nginx -d <FYREACTYL-DOMAIN>\n")),(0,o.kt)("p",null,"When finished installing SSL it shoudl look something like this.\nPlease if anything happens when installing SSL and does not looke like that conatct support on discord."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'IMPORTANT NOTES:\n - Congratulations! Your certificate and chain have been saved at:\n   /etc/letsencrypt/live/your.dashactyl.domain/fullchain.pem\n   Your key file has been saved at:\n   /etc/letsencrypt/live/your.dashactyl.domain/privkey.pem\n   Your cert will expire on date. To obtain a new or tweaked\n   version of this certificate in the future, simply run certbot\n   again. To non-interactively renew *all* of your certificates, run\n   "certbot renew"\n - If you like Certbot, please consider supporting our work by:\n\n   Donating to ISRG / Let\'s Encrypt:   https://letsencrypt.org/donate\n   Donating to EFF:                    https://eff.org/donate-le\n')),(0,o.kt)("p",null,"time to set the config file!"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"cd /etc/nginx/sites-available\nnano dashactyl.conf\n")),(0,o.kt)("p",null,"Paste it in the config\nChange ",(0,o.kt)("inlineCode",{parentName:"p"},"<DOMAIN>")," & ",(0,o.kt)("inlineCode",{parentName:"p"},"<PORT>")," to your port and domain."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-conf"},'server {\n  listen 80;\n  server_name <DOMAIN>;\n  return 301 https://$server_name$request_uri;\n}\nserver {\n  listen 443 ssl http2;\n\n  server_name <DOMAIN>;\n  ssl_certificate /etc/letsencrypt/live/<DOMAIN>/fullchain.pem;\n  ssl_certificate_key /etc/letsencrypt/live/<DOMAIN>/privkey.pem;\n  ssl_session_cache shared:SSL:10m;\n  ssl_protocols SSLv3 TLSv1 TLSv1.1 TLSv1.2;\n  ssl_ciphers  HIGH:!aNULL:!MD5;\n  ssl_prefer_server_ciphers on;\n\n  location / {\n    proxy_pass http://localhost:<PORT>/;\n    proxy_buffering off;\n    proxy_set_header X-Real-IP $remote_addr;\n  }\n\n  location /afkwspath {\n    proxy_http_version 1.1;\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection "upgrade";\n    proxy_pass "http://localhost:<PORT>/afkwspath";\n  }\n}\n')),(0,o.kt)("p",null,"Now to symlink the file."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"sudo ln -s /etc/nginx/sites-available/dashactyl.conf /etc/nginx/sites-enabled/dashactyl.conf\n")),(0,o.kt)("p",null,"Once you have edited, saved, and symlinked your configuration file, restart Nginx with ",(0,o.kt)("inlineCode",{parentName:"p"},"systemctl restart nginx")," and restart Fyreactyl. You should see it running on that domain with SSL!"))}h.isMDXComponent=!0}}]);